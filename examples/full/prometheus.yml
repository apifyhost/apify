global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: 'apify-cluster'
    environment: 'development'

scrape_configs:
  # Apify SQLite instance
  - job_name: 'apify-sqlite'
    static_configs:
      - targets: ['apify-sqlite:9090']
        labels:
          instance: 'apify-sqlite'
          database: 'sqlite'

  # Apify PostgreSQL Data Plane
  - job_name: 'apify-dp'
    static_configs:
      - targets: ['apify-dp:9090']
        labels:
          instance: 'apify-dp'
          database: 'postgres'
          role: 'data-plane'

  # Apify PostgreSQL Control Plane
  - job_name: 'apify-cp'
    static_configs:
      - targets: ['apify-cp:9090']
        labels:
          instance: 'apify-cp'
          database: 'postgres'
          role: 'control-plane'

  # Prometheus self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
